<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.5.3" />
<title>EDA_miner.apps.exploration.Networks API documentation</title>
<meta name="description" content="This module is about viewing network data â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase;cursor:pointer}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>EDA_miner.apps.exploration.Networks</code></h1>
</header>
<section id="section-intro">
<p>This module is about viewing network data.</p>
<p>Global Variables:
- Sidebar: To be used for creating side-menus.</p>
<h2 id="functions">Functions</h2>
<ul>
<li>Network_Options: Generate the layout of the dashboard.
Dash callbacks:<ul>
<li>render_variable_choices_network: Create a menu of dcc components
for the user to choose plotting
options.</li>
<li>plot_network: Plot the network graph according to user choices.</li>
</ul>
</li>
</ul>
<p>Notes to others:
Contributions are encouraged here, although you should consider
starting with another part if you're new to dash or this project.
Main functionality is still lacking in this part. You can use this
module to add new buttons, input, or other interface-related,
element, or maybe a new type of graph (in which case implement
it in a new file <code>graphs.networks.py</code>). Like with other modules,
working on exporting network graphs is encouraged.</p>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">&#34;&#34;&#34;
This module is about viewing network data.

Global Variables:
    - Sidebar: To be used for creating side-menus.

Functions:
    - Network_Options: Generate the layout of the dashboard.

Dash callbacks:
    - render_variable_choices_network: Create a menu of dcc components \
                                       for the user to choose plotting \
                                       options.
    - plot_network: Plot the network graph according to user choices.

Notes to others:
    Contributions are encouraged here, although you should consider
    starting with another part if you&#39;re new to dash or this project.
    Main functionality is still lacking in this part. You can use this
    module to add new buttons, input, or other interface-related,
    element, or maybe a new type of graph (in which case implement
    it in a new file `graphs.networks.py`). Like with other modules,
    working on exporting network graphs is encouraged.
&#34;&#34;&#34;

from dash.dependencies import Input, Output, State
import dash_core_components as dcc
import dash_html_components as html
from dash.exceptions import PreventUpdate

import dash_cytoscape as cyto

from server import app
from utils import r, create_dropdown
from apps.data.View import get_data

from itertools import chain


Sidebar = []


def Network_Options(options, results):

    return html.Div(children=[

        html.Div([
            # Choose a dataset
            html.Div(create_dropdown(&#34;Available datasets&#34;, options,
                                     multi=False, id=&#34;dataset_choice_network&#34;),
                     className=&#34;vertical_dropdowns&#34;),

            # Available buttons and choices for plotting
            html.Div(create_dropdown(&#34;In-node&#34;, options=[],
                                     multi=False, id=&#34;in_node&#34;),
                     className=&#34;vertical_dropdowns&#34;),
            html.Div(create_dropdown(&#34;Out-node&#34;, options=[],
                                     multi=False,
                                     id=&#34;out_node&#34;),
                     className=&#34;vertical_dropdowns&#34;),
            html.Div(create_dropdown(&#34;Layout&#34;, id=&#39;dropdown-callbacks-1&#39;,
                                     value=&#39;grid&#39;, multi=False,
                                     clearable=False,
                                     options=[
                                         {&#39;label&#39;: name,
                                          &#39;value&#39;: name}
                                         for name in [&#39;grid&#39;, &#39;random&#39;,
                                                      &#39;circle&#39;, &#39;concentric&#39;,
                                                      &#39;cose&#39;]
                                     ]),
                     className=&#34;vertical_dropdowns&#34;)

        ], className=&#34;col-sm-3&#34;),

        # The graph itself
        html.Div([
            cyto.Cytoscape(
                id=&#39;cytoscape_network_graph&#39;,
                layout={&#39;name&#39;: &#39;preset&#39;},
                style={&#39;width&#39;: &#39;100%&#39;, &#39;height&#39;: &#39;700px&#39;},
                elements=[
                    {&#39;data&#39;: {&#39;id&#39;: &#39;one&#39;, &#39;label&#39;: &#39;Example Node 1&#39;},
                     &#39;position&#39;: {&#39;x&#39;: 75, &#39;y&#39;: 75}},
                    {&#39;data&#39;: {&#39;id&#39;: &#39;two&#39;, &#39;label&#39;: &#39;Example Node 2&#39;},
                     &#39;position&#39;: {&#39;x&#39;: 200, &#39;y&#39;: 200}},
                    {&#39;data&#39;: {&#39;source&#39;: &#39;one&#39;, &#39;target&#39;: &#39;two&#39;}}
                ]
            ),

        ], className=&#34;col-sm-9&#34;),
    ], className=&#34;row&#34;)




@app.callback([Output(&#34;in_node&#34;, &#34;options&#34;),
               Output(&#34;out_node&#34;, &#34;options&#34;)],
              [Input(&#34;dataset_choice_network&#34;, &#34;value&#34;)],
              [State(&#34;user_id&#34;, &#34;children&#34;)])
def render_variable_choices_network(dataset_choice, user_id):
    &#34;&#34;&#34;
        Create a menu of dcc components for the user to choose
        plotting options.

    Args:
        dataset_choice (str): Name of dataset.
        user_id (str): Session/user id.

    Returns:
        list(list(dict)): Key-value pairs to be input as \
                          `dcc.Dropdown` options.
    &#34;&#34;&#34;


    df = get_data(dataset_choice, user_id)

    # Make sure all variables have a value before returning choices
    if any(x is None for x in [df, dataset_choice]):
        return [[], [], []]

    options = [{&#39;label&#39;: col[:35], &#39;value&#39;: col} for col in df.columns]

    return [options, options]


@app.callback([Output(&#34;cytoscape_network_graph&#34;, &#34;elements&#34;),
               Output(&#39;cytoscape_network_graph&#39;, &#39;layout&#39;)],
              [Input(&#34;in_node&#34;, &#34;value&#34;),
               Input(&#34;out_node&#34;, &#34;value&#34;),
               Input(&#39;dropdown-callbacks-1&#39;, &#39;value&#39;)],
              [State(&#34;user_id&#34;, &#34;children&#34;),
               State(&#34;dataset_choice_network&#34;, &#34;value&#34;)])
def plot_network(in_node, out_node, layout_choice, user_id,
                 dataset_choice_network):
    &#34;&#34;&#34;
    Plot the network graph according to user choices.

    Args:
        in_node (str): Column name containing the values of \
                      nodes from where links start.
        out_node (str): Column name for nodes where links end.
        layout_choice (str): One of the layouts available in \
                             Cytoscape.
        user_id (str): Session/user id.
        dataset_choice_network (str): Name of dataset.

    Returns:
        [list(dict), dict]: A list of elements (dicts for Cytoscape) \
                            and the layout for the graph.
    &#34;&#34;&#34;


    if any(x is None for x in [in_node, out_node, layout_choice,
                               dataset_choice_network]):
        raise PreventUpdate

    # This doesn&#39;t seem to be able to handle more than 100
    # https://github.com/cytoscape/cytoscape.js/issues/858
    # TODO: Consider adding clustering
    df = get_data(dataset_choice_network, user_id).sample(n=100)

    node_list = []
    for node in chain(df[in_node].values, df[out_node].values):
        node_list.append({&#34;data&#34;: {
            &#34;id&#34;: node, &#34;label&#34;: node,
        }})

    edge_list = []
    for i, row in df[[in_node, out_node]].iterrows():
        edge_list.append({&#34;data&#34;: {
            &#34;source&#34;: row[in_node], &#34;target&#34;: row[out_node],
        }})

    # TODO: consider coloring nodes based on in/out-nodes
    return [node_list + edge_list, {&#39;name&#39;: layout_choice}]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="EDA_miner.apps.exploration.Networks.Network_Options"><code class="name flex">
<span>def <span class="ident">Network_Options</span></span>(<span>options, results)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def Network_Options(options, results):

    return html.Div(children=[

        html.Div([
            # Choose a dataset
            html.Div(create_dropdown(&#34;Available datasets&#34;, options,
                                     multi=False, id=&#34;dataset_choice_network&#34;),
                     className=&#34;vertical_dropdowns&#34;),

            # Available buttons and choices for plotting
            html.Div(create_dropdown(&#34;In-node&#34;, options=[],
                                     multi=False, id=&#34;in_node&#34;),
                     className=&#34;vertical_dropdowns&#34;),
            html.Div(create_dropdown(&#34;Out-node&#34;, options=[],
                                     multi=False,
                                     id=&#34;out_node&#34;),
                     className=&#34;vertical_dropdowns&#34;),
            html.Div(create_dropdown(&#34;Layout&#34;, id=&#39;dropdown-callbacks-1&#39;,
                                     value=&#39;grid&#39;, multi=False,
                                     clearable=False,
                                     options=[
                                         {&#39;label&#39;: name,
                                          &#39;value&#39;: name}
                                         for name in [&#39;grid&#39;, &#39;random&#39;,
                                                      &#39;circle&#39;, &#39;concentric&#39;,
                                                      &#39;cose&#39;]
                                     ]),
                     className=&#34;vertical_dropdowns&#34;)

        ], className=&#34;col-sm-3&#34;),

        # The graph itself
        html.Div([
            cyto.Cytoscape(
                id=&#39;cytoscape_network_graph&#39;,
                layout={&#39;name&#39;: &#39;preset&#39;},
                style={&#39;width&#39;: &#39;100%&#39;, &#39;height&#39;: &#39;700px&#39;},
                elements=[
                    {&#39;data&#39;: {&#39;id&#39;: &#39;one&#39;, &#39;label&#39;: &#39;Example Node 1&#39;},
                     &#39;position&#39;: {&#39;x&#39;: 75, &#39;y&#39;: 75}},
                    {&#39;data&#39;: {&#39;id&#39;: &#39;two&#39;, &#39;label&#39;: &#39;Example Node 2&#39;},
                     &#39;position&#39;: {&#39;x&#39;: 200, &#39;y&#39;: 200}},
                    {&#39;data&#39;: {&#39;source&#39;: &#39;one&#39;, &#39;target&#39;: &#39;two&#39;}}
                ]
            ),

        ], className=&#34;col-sm-9&#34;),
    ], className=&#34;row&#34;)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="EDA_miner.apps.exploration" href="index.html">EDA_miner.apps.exploration</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="EDA_miner.apps.exploration.Networks.Network_Options" href="#EDA_miner.apps.exploration.Networks.Network_Options">Network_Options</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.5.3</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>